FCEUX 2.40 for OpenDingux/RetroFW
---------------------------------
Built on: RELEASE_DATE

FCEUX is a cross platform, NTSC and PAL Famicom/NES and Dendy emulator

This is a build for OpenDingux and RetroFW based on soarqin's 
fork with additions from gameblabla and pingflood's works and updated
to the upstream version 2.4.0 (Released 24 June 2021).

Bios file
---------
To load FDS files bios file `disksys.rom` is needed. It must be placed
at `$HOME/.fceux` directory or in the game directory.

Controls
--------
 
 FCEUX         Nes
 -------------------------------------------------------
 Pad           Pad
 A             A
 B             B
 X             TurboA
 Y             TurboB
 Select        Select
 Start         Start
 POWER, L2     Open menu
 Start+Select  Open menu in RetroFW (configurable)

 Default Hotkeys
 --------------------------------------------------------
 R1 + A        Save state (current slot from gui is used)
 R1 + B        Load state (current slot from gui is used)
 R1 + X        Toggle fullscreen
 R1 + Y        Flip fds disk
 R1 + UP       Toggle framerate display
 R1 + DOWN     Toggle Game Genie
 R1 + LEFT     Insert vsuni coin
 R1 + RIGHT    Open Cheat browser
 R1 + SELECT   Save snapshot
 R1 + START    Pause emulation
 L1            Toggle throttling

 Controls in menus
 --------------------------------------------------------
 Up/Down           Move to select a submenu or option
 A                 Enter submenu
 Left/Right        Change values for selected option
 B                 Go back to previous menu or exit if
                   you are in top menu

 Controls in ROM Browser
 --------------------------------------------------------
 Up/Down           Move to select file or directory
 A                 Load selected file/enter directory
 B                 Navigate up one directory level
 X                 Exit from file browser
 Left/Right        Select first/last file in current page
                   or advanve one page up/down if
                   first/last file is already selected
 L1                Go to last file in current directory
 R1                Go to first file in current directory
 Select            Save current directory as default when
                   open ROM browser

 Controls in Cheat Browser
 --------------------------------------------------------
 Up/Down           Move to select cheat
 A                 Enable/disable cheat
 B                 Exit to previous menu
 X                 Exit to emulator
 Y                 Open browser to select a `.cht` file
                   to import. This override current cheats
 Left/Right        Select first/last cheat in current page
                   or advanve one page up/down if
                   first/last cheat is already selected
 L1                Go to last cheat
 R1                Go to first cheat
 Start             Enable/disable cheats globally
 Select            Enable/disable cheatfiles auto load/save
                   golbally

 L1 and R1 is equal to L and R for devices withouth L2 and R2 buttons.

Auto-resume play
----------------
If enabled, FCEUX will make a special savestate every time you close
ROM (loading another rom or exiting from emulator), and will automatically
load the savestate when you open this ROM next time, so you can continue
from where you left the game.

This savestates will be created in the `$HOME/.fceux/fcs` directory and it
will be named `<filename's game>-resume.fcs`

Cheats
------

*Adapted from FCEUX upstream help*

By default cheat files (.cht) are stored in the "cheats" subdirectory under
the base FCEUX (`$HOME/.fceux/cheats`).

The files are in a simple plain-text format. Each line represents a one-byte
memory patch. The format is as follows(text in brackets [] represents optional
parameters):

    [S][C][:]Address(hex):Value(hex):[Compare value:]Description

Example:

    040e:05:Infinite super power.

A colon(:) near the beginning of the line is used to disable the cheat.
"S" denotes a cheat that is a read-substitute-style cheat(such as with
Game Genie cheats), and a "C" denotes that the cheat has a compare value.


When a game is loaded, FCEUX will load any accompanying saved `.cht` file
in `$HOME/.fceux/cheats` automatically. This can be changed by disabling
Auto load/save in **Cheat browser**.

- Cheat browser -

You can access to Cheat browser from main menu or with hotkey `L1 + RIGHT`.

The Cheat browser will cheat the list of current loaded cheats. It will
display cheat description or code if no description is available.

A `*` in front of chate name will be displayed for enabled cheats. You can
enable/disable a cheat by selecting it and use `A` button.

If there are no loaded cheats for current rom you can import them from
a `.cht` file located in any directory. For import use the `Y` button, it
will init a browser in default ROM folder, navigate to directory where
desired `.cht` file is located and load it using the `A` button.

When a cheat file is imported it will overwrite any cheat previously loaded
and it will be saved in `$HOME/.fceux/cheats` for future auto load/save.

Cheats and auto load/save options can be changed in Cheat browser with
Start and Select buttons respectively. Differently than upstream FCEUX this
options will be saved in the configuration file. Also take into account that
these are global options and not per game options.

Game Genie
----------
You must place Game Genie rom in the `$HOME/.fceux` directory and it must
be named `gg.rom`.

You can toggle it in `Settings Menu --> Main Setup` or with the
hotkey `R1 + DOWN`.

When toggled a hard reset will be done if a rom was loaded.

What's new
----------

 12 September 2021
  - Fixed enabling Scanline start and end when loading a rom.
    For this FCEUD_ReloadConfig is refactored to call UpdateEMUCore, also
    moving enabling autoresume to UpdateEMUCore.
  - Build for OpenDingux for lepus.
 
 25 July 2021
  - Some refactorings for Game Genie use and assign hotkey to toggle it.
  - Added autoresume. It can be enabled in `Main settings`. This is a feature
    from upstream FCEUX.
  - Added Cheat browser. With it you can import cheats from `.cht` files, that
    will be saved in `$HOME/.fceux/cheats` for later autoload, and
    enable/disable loaded cheats.
    Also you can enable/disable cheats and enable/disable the auto load/save
    of cheats files per game globally, both are by default enabled.

 21 July 2021
  - The screenshot menu option now saves directly when the A button is pressed.
    Until now you had to press the A button and then exit from menu to emulator
    for the screenshot to be saved.
    Screenshots are saved at `$HOME/.fceux/snaps` directory. Filenames follow
    the scheme `<rom name>-<sequential number>.png`.
  - Fixed a bug in the automatic video region change that caused the save
    settings per game to not work.
  - RetroFW: Add Start+Select combo to open menu. Configurable in Control
    option. (taken from pingflood's RetroFW port).
  - RetroFW. Add ipk build for RetroFW 1 devices.
  - OpenDingux: For hardware scaling in OpenDingux 2014 versions (stock
    firmware or Rogue), the full screen is forced by disabling the aspect ratio
  - Add manual to opk/ipk and updated the Readme.

 10 July 2021
  - Based on soarqin's fork and upgraded to upstream FCEUX 2.4.0 version with
    additions from gameblabla and pingflood's versions.
  - Changes to Makefile for beta OD and RetroFW 2 compilation
  - Fixed the exit from main menu
  - Load rom: pagination with left and right cursors changed to scroll
    one page
  - For OpenDingux beta: Set video refresh rate based on cartridge region
    (taken from gameblabla's port)
  - Automatically set video mode based on cartridge region
  - Fixed the Flip disc option from main menu option
  - Enable Flip disc option in main menu only if a FDS file is inserted
    (taken from pingflood's RetroFW port)
  - Try to load disksys.rom from current rom directory
    (taken from pingflood's RetroFW port)
  - For debug purposes: when launch FCEUX witouth cartridge launch
    emulator rom selector
  - Change button layout in Control Setup
  - Some other minor changes

Build
-----
Use 'make' to compile. If your toolchain is not in /opt/gcw0-toolchain
pass your path in the variable TOOLCHAIN.
Executable and opk files can be named with TARGET variable. By default the name
is 'fuse_od'. Upstream version and build date will be added to opk name.
For 2014 OpenDingux (Stock firmware o Rogue) pass the variable ODVERSION=2014
To compile for RetroFW pass 'retrofw' to DEVICE variable. For RetroFW opk
and ipk files will be created.

Examples:
make TOOLCHAIN=/opt/retrofw2-toolchain TARGET=fceux_retrofw DEVICE=retrofw -f Makefile
make TOOLCHAIN=/opt/opendingux-toolchain TARGET=fceux_od_beta -f Makefile
make TOOLCHAIN=/opt/gcw0-toolchain TARGET=fceux_gcw0 ODVERSION=2014 -f Makefile
make TOOLCHAIN=/opt/lepus-toolchain TARGET=fceux_lepus DEVICE=lepus -f Makefile

Build files are created in the `bin`directory.

----

Thanks go to all people who worked on each incarnation of FCEUX: the_gama, ValdikSS and DiegoSLTS, Steward-fu, soarqin, gameblabla, pingflood.
